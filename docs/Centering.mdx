import { Meta, Story, ArgsTable } from '@storybook/blocks';
import { GraphCanvas } from '../src';

<Meta title="Docs/Advanced/Centering" />

# Centering
Reagraph supports the ability to dynamically center nodes using the `centerGraph` and `fitNodesInView` methods from the `GraphCanvasRef`. These methods allows you to programmatically center the camera view around specific nodes or the entire graph.

### Usage
First, you need to get a reference to the `GraphRef`:

```jsx

  const graphRef = useRef<GraphCanvasRef | null>(null);
return (
    <GraphCanvas ref={graphRef} {...} />
)
```

Then, you can use the `fitNodesInView` method to center all nodes within view of the camera:

```js
graphRef.current?.fitNodesInView();
```

If you want to fit the view around specific nodes, you can pass an array of node ids to the `fitNodesInView` method:

```jsx
graphRef.current?.fitNodesInView(['node1', 'node2']);
```

If you want to center the camera on a given set of nodes without adjusting the zoom, you can use the `centerGraph` method:

```jsx
// Center the camera position based on all nodes in the graph
graphRef.current?.centerGraph();

// Center the camera position based on specific nodes
graphRef.current?.centerGraph(['node1', 'node2']);
```

### Examples
In this example, clicking the "Fit View" button will fit the view around all the nodes in the graph:
```jsx
import React, { useRef } from 'react';
import { GraphCanvas } from 'reagraph';

const MyComponent = () => {
  const graphRef = useRef<GraphCanvasRef | null>(null);

  const fitView = () => {
    graphRef.current?.fitNodesInView();
  };

  return (
    <div>
      <GraphCanvas ref={graphRef} {...} />
      <button onClick={fitView}>Fit View</button>
    </div>
  );
};
```


Here's a more advanced example that fits the view on the whole graph whenever new nodes are added:
```jsx
import React, { useRef, useEffect } from 'react';
import { GraphCanvas } from 'reagraph';

const MyComponent = ({ nodes }) => {
  const graphRef = useRef<GraphCanvasRef | null>(null);

  useEffect(() => {
    graphRef.current?.fitNodesInView();
  }, [nodes]);

  return <GraphCanvas ref={graphRef} {...} />;
};
```
